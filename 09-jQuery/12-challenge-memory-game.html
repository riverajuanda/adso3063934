<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12-Callenge-Memory-Game</title>
    <link rel="shortcut icon" href="../images/logo-jquery.png" type="image/x-icon">
    <link rel="stylesheet" href="../css/master.css">
</head>
<style>
    body {
        font-family: Arial, sans-serif;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background-color: #0d1117;
        color: #ffffff;
    }

    .grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
    }

    .flip-container {
        perspective: 1000px;

    }

    .flip-card {
        width: 240px;
        /* Plus large */
        height: 400px;
        /* Plus haut */
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.6s;
        cursor: pointer;
        margin: 10px;
    }

    .flip-card:hover {
        transform: rotateY(180deg);
    }

    .flip-card .front,
    .flip-card .back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        display: flex;
        justify-content: center;
        align-items: center;
        border-radius: 15px;
        border: 2px solid rgba(255, 105, 180, 0.8);
        /* Bord rose transparent */
        box-shadow: 0 0 15px rgba(255, 105, 180, 0.8);
        /* Effet néon */
        background: rgba(255, 255, 255, 0.1);
        /* Fond semi-transparent */
        color: white;
    }

    .flip-card .front {
        background: rgba(255, 255, 255, 0.1);
        /* Fond semi-transparent */
    }

    .flip-card .back {
        background: rgba(255, 255, 255, 0.1);
        /* Fond semi-transparent */
        transform: rotateY(180deg);
    }

.grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 20px;
        margin: 0 auto;
        max-width: 1000px;
    }
    @media (max-width: 800px) {
        .grid {
            grid-template-columns: repeat(3, 1fr);
        }
    }
    @media (max-width: 600px) {
        .grid {
            grid-template-columns: repeat(2, 1fr);
        }
    }
    .flip-card {
        width: 120px;
        height: 160px;
        position: relative;
        transform-style: preserve-3d;
        transition: transform 0.5s;
        cursor: pointer;
        margin: 0 auto;
    }
    .flip-card.flipped {
        transform: rotateY(180deg);
    }
    .flip-card .front,
    .flip-card .back {
        position: absolute;
        width: 100%;
        height: 100%;
        backface-visibility: hidden;
        border-radius: 10px;
        border: 2px solid #ff69b4;
        box-shadow: 0 0 10px #ff69b4;
        background: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        overflow: hidden;
    }
    .flip-card .front {
        background: #fff;
        z-index: 2;
    }
    .flip-card .back {
        background: #222;
        color: #fff;
        transform: rotateY(180deg);
        z-index: 1;
    }
    .flip-card img {
        width: 90%;
        height: 90%;
        object-fit: contain;
    }
    .memory-message {
        text-align: center;
        font-size: 1.3rem;
        margin: 20px 0;
        color: #ff69b4;
    }

</style>

<body class="jquery">
    <nav class="nav">
        <a href="/09-jQuery/index.html">
            <svg xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 576 512"><!--!Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.-->
                <path d="M320 33.8L320 160 48.5 160C100.2 82.8 188.1 32 288 32c10.8 0 21.5 .6 32 1.8zM352 160l0-120.9C424.9 55.7 487.2 99.8 527.5 160L352 160zM29.9 192L96 192l0 128L0 320c0-46 10.8-89.4 29.9-128zM192 320l-64 0 0-128 320 0 0 128-64 0 0 32 192 0 0 80c0 26.5-21.5 48-48 48l-176 0 0-128c0-35.3-28.7-64-64-64s-64 28.7-64 64l0 128L48 480c-26.5 0-48-21.5-48-48l0-80 192 0 0-32zm288 0l0-128 66.1 0c19.2 38.6 29.9 82 29.9 128l-96 0z" />
            </svg>
        </a>
    </nav>
    <main>
        <header class="header">
            <h2>12-Callenge-Memory-Game</h2>
            <p>Build a memory game using jQuery.</p>
        </header>

        <div class="grid">
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 1</div>
                    <div class="back">Dos 1</div>
                </div>
            </div>
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 2</div>
                    <div class="back">Dos 2</div>
                </div>
            </div>
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 3</div>
                    <div class="back">Dos 3</div>
                </div>
            </div>
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 4</div>
                    <div class="back">Dos 4</div>
                </div>
            </div>
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 5</div>
                    <div class="back">Dos 5</div>
                </div>
            </div>
            <div class="flip-container">
                <div class="flip-card" onclick="flipCard(this)">
                    <div class="front">Carte 6</div>
                    <div class="back">Dos 6</div>
                </div>
            </div>
        </div>


        </section>

    </main>
    <script src="/09-jQuery/Todo list/js/jquery-3.7.1.min.js"></script>
    <script>
        $(document).ready(function () {
            // Your code here
            $('.ready').text('✔ DOM Loaded  ⚠');
        });


        const images = [
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/1.png",
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/4.png",
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/7.png",
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/25.png",
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/39.png",
            "https://raw.githubusercontent.com/PokeAPI/sprites/master/sprites/pokemon/other/official-artwork/133.png"
        ];
        const backImg = "https://cdn-icons-png.flaticon.com/512/188/188987.png"; // reverso

        let cards = [];
        let flippedCards = [];
        let matched = 0;
        let lockBoard = false;

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function setupBoard() {
            matched = 0;
            flippedCards = [];
            lockBoard = false;
            $('.memory-message').text('');
            // Duplicar y mezclar imágenes
            cards = shuffle([...images, ...images]);
            let html = '';
            cards.forEach((img, idx) => {
                html += `
                <div class="flip-card" data-index="${idx}" data-img="${img}">
                    <div class="front">
                        <img src="${img}" alt="pokemon">
                    </div>
                    <div class="back">
                        <img src="${backImg}" alt="back">
                    </div>
                </div>
                `;
            });
            $('.grid').html(html);
            $('.flip-card').removeClass('flipped');
        }

        function resetGame() {
            setupBoard();
        }

        $(document).ready(function () {
            setupBoard();

            $('.reset-button').on('click', resetGame);

            $('.grid').on('click', '.flip-card', function () {
                if (lockBoard) return;
                if ($(this).hasClass('flipped')) return;
                if (flippedCards.length === 2) return;

                $(this).addClass('flipped');
                flippedCards.push($(this));

                if (flippedCards.length === 2) {
                    lockBoard = true;
                    const img1 = flippedCards[0].data('img');
                    const img2 = flippedCards[1].data('img');
                    if (img1 === img2) {
                        matched += 2;
                        flippedCards = [];
                        lockBoard = false;
                        if (matched === 12) {
                            $('.memory-message').text('¡Felicidades! Has encontrado todas las parejas.');
                        }
                    } else {
                        setTimeout(() => {
                            flippedCards[0].removeClass('flipped');
                            flippedCards[1].removeClass('flipped');
                            flippedCards = [];
                            lockBoard = false;
                        }, 1000);
                    }
                }
            });
        });
    </script>
</body>

</html>